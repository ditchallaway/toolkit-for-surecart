"use strict";function surelywpLoadOrderInfo(e){const s={};e(".surelywp-order-product-names, .surelywp-subscription-type").each((function(){const t=e(this).data("checkout-id");t&&(s[t]=!0)}));const t=Object.keys(s);0!==t.length&&e.ajax({url:tk_ac_backend_ajax_object.ajax_url,type:"POST",dataType:"json",data:{action:"surelywp_tk_ac_get_order_info",checkout_ids:t,nonce:tk_ac_backend_ajax_object.admin_ajax_nonce},success:function(s){s.success&&e.each(s.data,(function(s,t){e(`.surelywp-order-product-names[data-checkout-id="${s}"]`).html(t.product_tag||"-"),e(`.surelywp-subscription-type[data-checkout-id="${s}"]`).html(t.subscription_tag||"-")}))},error:function(){console.error("Failed to fetch order info")}})}function surelywpLoadRecoveryStatus(e){const s={},t={};e(".surelywp-recovery-status").each((function(){const o=e(this).data("checkout-id"),c=e(this).data("customer-id");o&&(s[o]=!0),c&&(t[c]=!0)}));const o=Object.keys(s),c=Object.keys(t);0!==o.length&&0!==c.length&&e.ajax({url:tk_ac_backend_ajax_object.ajax_url,type:"POST",dataType:"json",data:{action:"surelywp_tk_ac_get_recovery_status",checkout_ids:o,customer_ids:c,nonce:tk_ac_backend_ajax_object.admin_ajax_nonce},success:function(s){e(".surelywp-recovery-status").each((function(){const t=e(this),o=t.data("checkout-id"),c=s.success&&s.data[o]?s.data[o].recovery_tag:"-";t.html(c)}))},error:function(){e(".surelywp-recovery-status").each((function(){e(this).html("-")}))}})}jQuery(document).ready((function(e){e("#admin-columns-fields").length&&e("#admin-columns-fields").sortable({handle:".field-drag-handle",containment:"#admin-columns-fields",items:"> .admin-column-field:not(.no-sort)",cancel:".no-sort",cursor:"row-resize",scrollSensitivity:40,forcePlaceholderSize:!0,update:function(s,t){e(".admin-columns-fields .admin-column-field.order").each((function(s,t){e(".admin-column-field-position",t).attr("value",s)})),e(".admin-columns-fields .admin-column-field.product").each((function(s,t){e(".admin-column-field-position",t).attr("value",s)}))}}),e(document).on("click","#order-columns-btn",(function(s){e(this).addClass("active").closest(".columns-btns").find("a").not(this).removeClass("active"),e("#product-columns-settings").addClass("hidden"),e("#order-columns-settings").removeClass("hidden"),e("#surelywp-tk-order-column-status").is(":checked")&&e("#admin-columns-fields .admin-column-field.order").removeClass("hidden"),e("#admin-columns-fields .admin-column-field.product").addClass("hidden")})),e(document).on("change","#surelywp-tk-order-column-status",(function(s){e("#admin-columns-fields .admin-column-field.order").toggleClass("hidden")})),e(document).on("click","#product-columns-btn",(function(s){e(this).addClass("active").closest(".columns-btns").find("a").not(this).removeClass("active"),e("#order-columns-settings").addClass("hidden"),e("#product-columns-settings").removeClass("hidden"),e("#surelywp-tk-product-column-status").is(":checked")&&e("#admin-columns-fields .admin-column-field.product").removeClass("hidden"),e("#admin-columns-fields .admin-column-field.order").addClass("hidden")})),e(document).on("change","#surelywp-tk-product-column-status",(function(s){e("#admin-columns-fields .admin-column-field.product").toggleClass("hidden")})),e(document).on("click",".column-close-icon, .admin-column-heading-top.close",(function(s){e(this).closest(".admin-column-field").find(".column-open-icon").removeClass("hidden"),e(this).closest(".admin-column-field").find(".column-close-icon").addClass("hidden"),e(this).closest(".admin-column-field").find(".admin-column-field-options").slideUp(),e(this).closest(".admin-column-field").find(".admin-column-heading-top").addClass("open").removeClass("close"),e(this).closest(".admin-column-field").toggleClass("open")})),e(document).on("click",".column-open-icon, .admin-column-heading-top.open",(function(s){e(this).closest(".admin-column-field").find(".column-open-icon").addClass("hidden"),e(this).closest(".admin-column-field").find(".column-close-icon").removeClass("hidden"),e(this).closest(".admin-column-field").find(".admin-column-field-options").slideDown(),e(this).closest(".admin-column-field").find(".admin-column-heading-top").addClass("close").removeClass("open"),e(this).closest(".admin-column-field").toggleClass("open")})),e(document).on("change",".admin-column-field-options.product_name .is-show-column",(function(s){e("#tk-ac-product-featured-image-setting").toggle()})),e(".surecart_page_sc-orders").length&&(surelywpLoadOrderInfo(e),surelywpLoadRecoveryStatus(e));var s=tk_ac_backend_ajax_object.order_column_status,t=tk_ac_backend_ajax_object.product_column_status,o=tk_ac_backend_ajax_object.admin_columns.order,c=tk_ac_backend_ajax_object.admin_columns.product;s&&(o.order_number.is_show?e(".surecart_page_sc-orders #order").html(o.order_number.label):e(".surecart_page_sc-orders .column-order").hide(),o.order_payment_status.is_show?e(".surecart_page_sc-orders #status").html(o.order_payment_status.label):e(".surecart_page_sc-orders .column-status").hide(),o.order_fulfillment_status.is_show?e(".surecart_page_sc-orders #fulfillment_status").html(o.order_fulfillment_status.label):e(".surecart_page_sc-orders .column-fulfillment_status").hide(),o.order_shipping_status.is_show?e(".surecart_page_sc-orders #shipment_status").html(o.order_shipping_status.label):e(".surecart_page_sc-orders .column-shipment_status").hide(),o.order_payment_method.is_show?e(".surecart_page_sc-orders #method").html(o.order_payment_method.label):e(".surecart_page_sc-orders .column-method").hide(),o.order_integrations.is_show?e(".surecart_page_sc-orders #integrations").html(o.order_integrations.label):e(".surecart_page_sc-orders .column-integrations").hide(),o.order_total.is_show?e(".surecart_page_sc-orders #total").html(o.order_total.label):e(".surecart_page_sc-orders .column-total").hide(),o.order_type.is_show?e(".surecart_page_sc-orders #type").html(o.order_type.label):e(".surecart_page_sc-orders .column-type").hide(),o.order_date.is_show?e(".surecart_page_sc-orders #created").html(o.order_date.label):e(".surecart_page_sc-orders .column-created").hide()),t&&(c.product_name.is_show?(e(".surecart_page_sc-products #name").html(c.product_name.label),c.product_name.is_show_featured_image||(e(".surecart_page_sc-products .sc-product-name img").hide(),e(".surecart_page_sc-products .sc-product-name .sc-product-image-preview").hide())):e(".surecart_page_sc-products .column-name").hide(),c.product_price.is_show?e(".surecart_page_sc-products #price").html(c.product_price.label):e(".surecart_page_sc-products .column-price").hide(),c.product_commission_amount.is_show?e(".surecart_page_sc-products #commission_amount").html(c.product_commission_amount.label):e(".surecart_page_sc-products .column-commission_amount").hide(),c.product_quantity.is_show?e(".surecart_page_sc-products #quantity").html(c.product_quantity.label):e(".surecart_page_sc-products .column-quantity").hide(),c.product_integrations.is_show?e(".surecart_page_sc-products #integrations").html(c.product_integrations.label):e(".surecart_page_sc-products .column-integrations").hide(),c.product_collections.is_show?e(".surecart_page_sc-products #product_collections").html(c.product_collections.label):e(".surecart_page_sc-products .column-product_collections").hide(),c.product_page_publish_status.is_show?e(".surecart_page_sc-products #status").html(c.product_page_publish_status.label):e(".surecart_page_sc-products .column-status").hide(),c.featured_product.is_show?e(".surecart_page_sc-products #featured").html(c.featured_product.label):e(".surecart_page_sc-products .column-featured").hide(),c.product_date_created.is_show?e(".surecart_page_sc-products #date").html(c.product_date_created.label):e(".surecart_page_sc-products .column-date").hide())}));