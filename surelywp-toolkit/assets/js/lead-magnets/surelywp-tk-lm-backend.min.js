"use strict";jQuery(document).ready((function(e){var s=localStorage.getItem("lm_active_tab_id");if(s||(s="lm-products-tab"),setTimeout((function(){e("#"+s).trigger("click")}),100),e(document).on("click",".lead-magnets-settings-tabs .surelywp-btn",(function(s){e(this).addClass("active").closest(".lead-magnets-settings-tabs").find(".surelywp-btn").not(this).removeClass("active");let o=e(this).attr("id");switch(localStorage.setItem("lm_active_tab_id",o),e(".tab-settings").addClass("hidden"),o){case"lm-products-tab":e("#lm-products-settings").removeClass("hidden");break;case"lm-settings-tab":e("#subscription-form-settings").removeClass("hidden");break;case"lm-fields-tab":e("#subscription-form-fields-settings").removeClass("hidden");break;case"lm-verification-tab":e("#verification-email-settings").removeClass("hidden");break;case"lm-customer-dashboard-tab":e(".customer-dashboard-settings").removeClass("hidden")}})),e(document).on("change","#is-enable-lead-magnets",(function(s){e("#lead-magnets-product-options").toggle()})),e(document).on("change","#lm-products-selections",(function(s){switch(e(this).val()){case"all":e("#specific-product-selection-div").addClass("hidden"),e("#specific-product-collection-selection-div").addClass("hidden");break;case"specific":e("#specific-product-selection-div").removeClass("hidden"),e("#specific-product-collection-selection-div").addClass("hidden");break;case"specific_collection":e("#specific-product-collection-selection-div").removeClass("hidden"),e("#specific-product-selection-div").addClass("hidden")}})),e(document).on("change","#sub-form-method",(function(s){switch(e(this).val()){case"popup_form":e("#popup-form-settings").removeClass("hidden"),e("#inline-form-settings").addClass("hidden");break;case"inline_form":e("#inline-form-settings").removeClass("hidden"),e("#popup-form-settings").addClass("hidden")}})),e("#sub-form-fields-fields").length&&e("#sub-form-fields-fields").sortable({handle:".field-drag-handle",containment:"#sub-form-fields-fields",items:"> .surelywp-sortable-field:not(.no-sort)",cancel:".no-sort",cursor:"row-resize",scrollSensitivity:40,forcePlaceholderSize:!0,update:function(s,o){e("#sub-form-fields-fields .surelywp-sortable-field").each((function(s,o){e(".sub-form-field-position",o).attr("value",s)}))}}),e(document).on("click",".column-close-icon, .surelywp-sortable-field-heading-top.close",(function(s){e(this).closest(".surelywp-sortable-field").find(".column-open-icon").removeClass("hidden"),e(this).closest(".surelywp-sortable-field").find(".column-close-icon").addClass("hidden"),e(this).closest(".surelywp-sortable-field").find(".surelywp-sortable-field-options").slideUp(),e(this).closest(".surelywp-sortable-field").find(".surelywp-sortable-field-heading-top").addClass("open").removeClass("close"),e(this).closest(".surelywp-sortable-field").toggleClass("open")})),e(document).on("click",".column-open-icon, .surelywp-sortable-field-heading-top.open",(function(s){e(this).closest(".surelywp-sortable-field").find(".column-open-icon").addClass("hidden"),e(this).closest(".surelywp-sortable-field").find(".column-close-icon").removeClass("hidden"),e(this).closest(".surelywp-sortable-field").find(".surelywp-sortable-field-options").slideDown(),e(this).closest(".surelywp-sortable-field").find(".surelywp-sortable-field-heading-top").addClass("close").removeClass("open"),e(this).closest(".surelywp-sortable-field").toggleClass("open")})),e(document).on("change","#sub-form-fields-fields .surelywp-sortable-field .is-show-field",(function(){e(this).closest(".surelywp-sortable-field").find(".manage-field-is-required").toggle()})),e(document).on("change","#is-require-email-verification",(function(){e(".verification-email-options").toggle()})),e(document).on("change","#is-customer-dashboard-enable",(function(){e(".customer-dashboard-options").toggle()})),e("#surelywp-lm-product-block").length>0){var o=e("#surelywp-lm-product-block");o.remove(),e(".css-wzxb7d > div").eq(0).after(o)}e(document).on("scChange","#surelywp-lm-enable-switch",(function(s){var o=e("#surelywp-lm-enable-switch");o.addClass("cursor-not-allow");var t=s.target.checked?"1":"0",i=e("#lm-product-id").val();e.ajax({url:tk_lm_backend_ajax_object.ajax_url,dataType:"json",type:"POST",data:{action:"surelywp_tk_lm_toggle_product_lead",nonce:tk_lm_backend_ajax_object.nonce,is_lm_enable:t,product_id:i},success:function(s){o.removeClass("cursor-not-allow"),s.status&&(e(".css-uksis0").append('<div class="surelywp-product-updated" style="height: auto; opacity: 1;"><div class="components-snackbar-list__notice-container"><div class="components-snackbar" tabindex="0" role="button" aria-label="Dismiss this notice"><div class="components-snackbar__content">Product updated.</div></div></div></div>'),setTimeout((function(){e(".surelywp-product-updated").remove()}),2e3))}}).catch((e=>{console.error("Error:",e)}))}))}));