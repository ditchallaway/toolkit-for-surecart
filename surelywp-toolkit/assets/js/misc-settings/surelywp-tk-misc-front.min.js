"use strict";jQuery(document).ready(function(e){if(e("#customer-purchase").length&&(async()=>{await customElements.whenDefined("sc-downloads-list");let t=document.querySelector("sc-downloads-list#customer-purchase");if(!t||!Array.isArray(t.downloads)){console.log("Component not found or downloads not available");return}let s=t.shadowRoot;if(!s){console.log("Shadow root not found");return}let r=await new Promise(e=>{let t=s.querySelectorAll(".single-download__preview");if(t.length>0)return e(t);let r=new MutationObserver(()=>{let t=s.querySelectorAll(".single-download__preview");t.length>0&&(r.disconnect(),e(t))});r.observe(s,{childList:!0,subtree:!0})});t.downloads.forEach((t,s)=>{let n=t?.media,i=n?.id,c=n?.content_type?.startsWith("image/"),o=r[s];if(!i||!c||!o)return;let l=o.innerHTML;o.innerHTML='<sc-skeleton style="width: 100%; height: 100%; --border-radius: 0;"></sc-skeleton>',e.ajax({url:tk_misc_front_ajax_object.ajax_url,type:"POST",data:{action:"surelywp_tk_misc_get_download_media_url",media_id:i,view_type:"customer",nonce:tk_misc_front_ajax_object.misc_ajax_nonce},dataType:"json",success:function(e){if(e.status&&e.url){let t=document.createElement("img");t.src=e.url,t.style.maxWidth="100%",t.style.height="auto",o.innerHTML="",o.appendChild(t)}else o.innerHTML=l},error:function(e){console.error(`Error fetching media URL for ID ${i}:`,e),o.innerHTML=l}})})})(),e("#surelywp-tk-order-again-btn").length>0)var t=setInterval(function s(){var r=e("#surelywp-tk-order-again-btn"),n=document.querySelector("#sc-customer-order").shadowRoot.querySelector("sc-button");if(n){var i=r.clone().removeClass("hidden")[0];n.insertAdjacentElement("afterend",i),r.remove(),clearInterval(t)}},1e3);e(".surelywp-tk-misc-price-desc").length&&("display_selected"===e(".surelywp-tk-misc-price-desc").data("display-type")?(e(".sc-choices").length?e(".sc-choice").next(".surelywp-tk-misc-price-desc").first().removeClass("hidden"):e(".surelywp-tk-misc-price-desc").removeClass("hidden"),e(document).on("click",".sc-choice",function(t){e(".surelywp-tk-misc-price-desc").slideUp(150);var s=e(this).next(".surelywp-tk-misc-price-desc");s.length&&s.slideDown(150)})):e(".sc-choices").length?e(".sc-choice").next(".surelywp-tk-misc-price-desc").removeClass("hidden"):e(".surelywp-tk-misc-price-desc").removeClass("hidden"))});